<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Principle of Least Action - Interactive Simulation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Visualizing the Principle of Least Action</h1>
            <p class="subtitle">Explore how nature "chooses" paths in optics, classical mechanics, and quantum interference</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" data-tab="fermat">Fermat's Principle (Optics)</button>
            <button class="tab-button" data-tab="mechanics">Classical Mechanics (Basketball)</button>
            <button class="tab-button" data-tab="quantum">Quantum Double-Slit</button>
        </div>

        <div class="tab-content active" id="fermat">
            <div class="simulation-wrapper">
                <div class="info-panel">
                    <h2>Fermat's Principle of Least Time</h2>
                    <p>Light travels between two points along the path that takes the least time. Drag the refraction point to see how travel time changes.</p>
                    <div class="controls">
                        <label>
                            Refractive Index (n‚ÇÇ):
                            <input type="range" id="refractiveIndex" min="1.0" max="2.5" step="0.1" value="1.5">
                            <span id="refractiveIndexValue">1.5</span>
                        </label>
                        <label>
                            <input type="checkbox" id="showAllPaths" checked> Show Alternative Paths
                        </label>
                        <label>
                            <input type="checkbox" id="showWavefronts"> Show Wavefronts
                        </label>
                    </div>
                    <div class="stats">
                        <p>Current Travel Time: <span id="optimalTime">0.00</span> ns</p>
                        <p>Incident Angle (Œ∏‚ÇÅ): <span id="angleIncidence">0.0</span>¬∞</p>
                        <p>Refracted Angle (Œ∏‚ÇÇ): <span id="angleReflection">0.0</span>¬∞</p>
                    </div>
                    <div class="guided-practice">
                        <h3>üéØ Guided Practice</h3>
                        <ol>
                            <li><strong>Drag the blue dot</strong> along the boundary to change the refraction point.</li>
                            <li><strong>Watch the graph:</strong> Find the minimum travel time on the curve.</li>
                            <li><strong>Verify Snell's Law:</strong> Look for "‚úì Snell's Law satisfied!"</li>
                            <li><strong>Toggle wavefronts:</strong> See how light slows in water.</li>
                            <li><strong>Adjust n‚ÇÇ:</strong> Change the refractive index slider.</li>
                        </ol>
                    </div>
                </div>
                <canvas id="fermatCanvas" width="800" height="600"></canvas>
            </div>
            <div class="physics-explanation">
                <h3>üìö Fermat in a Nutshell</h3>

                <div class="explanation-section">
                    <h4>Key Idea</h4>
                    <ul class="compact-list">
                        <li>Light chooses the path that makes travel time stationary.</li>
                        <li>Drag the refraction point to sweep through every candidate path.</li>
                        <li>The green curve marks the minimum of the time graph.</li>
                    </ul>
                    <div class="formula">Travel Time: T = d‚ÇÅ/v‚ÇÅ + d‚ÇÇ/v‚ÇÇ</div>
                </div>

                <div class="explanation-section">
                    <h4>Snell's Law Appears Automatically</h4>
                    <p>At the optimum we have ‚àÇT/‚àÇx = 0, which gives the familiar relation</p>
                    <div class="formula"><strong>Snell's Law:</strong> n‚ÇÅ sin Œ∏‚ÇÅ = n‚ÇÇ sin Œ∏‚ÇÇ</div>
                    <p>The angle readouts update live, confirming that the minimum-time path also satisfies Snell.</p>
                </div>

                <div class="explanation-section">
                    <h4>Wavefront View</h4>
                    <p>Toggle wavefronts to see Huygens' picture: wavelets slow down in the denser medium, bending the front so that only the least-time route adds constructively.</p>
                </div>

                <div class="explanation-section">
                    <h4>Action Language</h4>
                    <p>The optical path length S = ‚à´ n(s) ds plays the role of action for light. Minimizing S is the optics analogue of Hamilton's principle used in the basketball tab.</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="mechanics">
            <div class="simulation-wrapper">
                <div class="info-panel">
                    <h2>Classical Mechanics: Least Action</h2>
                    <p>A basketball follows the path that extremizes the action. Multiple paths are possible, but only one survives!</p>
                    <div class="controls">
                        <label>
                            Path Mode:
                            <select id="pathMode">
                                <option value="spray">Spray (All Paths)</option>
                                <option value="neighborhood">Neighborhood</option>
                                <option value="heatmap">Heatmap</option>
                            </select>
                        </label>
                        <label>
                            Number of Paths:
                            <input type="range" id="numPaths" min="10" max="50" step="5" value="30">
                            <span id="numPathsValue">30</span>
                        </label>
                        <label>
                            Total Time T (s):
                            <input type="range" id="totalTime" min="0.5" max="2.5" step="0.1" value="1.2">
                            <span id="totalTimeValue">1.2</span>
                        </label>
                        <label>
                            Effective ‚Ñè:
                            <input type="range" id="hbarEff" min="0.1" max="2.0" step="0.1" value="0.5">
                            <span id="hbarEffValue">0.5</span>
                        </label>
                        <label>
                            Gravity (m/s¬≤):
                            <input type="range" id="gravity" min="5" max="15" step="0.5" value="9.8">
                            <span id="gravityValue">9.8</span>
                        </label>
                        <label>
                            <input type="checkbox" id="showAllTrajectories" checked> Show All Paths
                        </label>
                        <label>
                            <input type="checkbox" id="showPhasors" checked> Show Phasors
                        </label>
                        <label>
                            <input type="checkbox" id="showClassicalPath" checked> Show Classical Path
                        </label>
                        <label>
                            <input type="checkbox" id="showActionLabels"> Show Action Labels
                        </label>
                    </div>
                    <div class="stats">
                        <p>Classical Action: <span id="optimalAction">0.00</span> J¬∑s</p>
                        <p>Flight Time: <span id="flightTime">0.00</span> s</p>
                        <p>Phasor Sum |Œ£|: <span id="phasorMagnitude">0.00</span></p>
                    </div>
                    <div class="guided-practice">
                        <h3>üéØ Guided Practice</h3>
                        <ol>
                            <li><strong>Spray Mode:</strong> See many possible paths. Classical path glows green.</li>
                            <li><strong>Watch phasors:</strong> Paths add as vectors. Only near-classical paths align!</li>
                            <li><strong>Adjust ‚Ñè:</strong> Lower = sharper classical dominance.</li>
                            <li><strong>Neighborhood Mode:</strong> See how paths near classical add constructively.</li>
                            <li><strong>Drag the hoop:</strong> Watch how the classical path adapts.</li>
                        </ol>
                    </div>
                </div>
                <canvas id="mechanicsCanvas" width="800" height="600"></canvas>
            </div>
            <div class="physics-explanation">
                <h3>üìö Hamilton's Principle at Court-side</h3>

                <div class="explanation-section">
                    <h4>Key Takeaways</h4>
                    <ul class="compact-list">
                        <li>The action S = ‚à´ (¬Ωmv¬≤ ‚àí mgy) dt is stationary for the true shot.</li>
                        <li>Every dashed trajectory is a "what-if" variation around the shot.</li>
                        <li>Color encodes action: cooler tones are closer to the optimum.</li>
                    </ul>
                    <div class="formula">Action: S = ‚à´‚ÇÄ·µÄ (¬Ωmv¬≤ ‚àí mgy) dt</div>
                </div>

                <div class="explanation-section">
                    <h4>Interference Picture</h4>
                    <p>Each path contributes a phasor of length 1 pointing at angle S/‚Ñè. Near the classical track the phases line up, so the sum arrow grows. Far away they whirl around and cancel.</p>
                </div>

                <div class="explanation-section">
                    <h4>How to Use the Modes</h4>
                    <ul class="compact-list">
                        <li><strong>Spray:</strong> broad sampling of crazy arcs.</li>
                        <li><strong>Neighborhood:</strong> tight bundle near the classical curve.</li>
                        <li><strong>Heatmap:</strong> structured grid to map the action landscape.</li>
                    </ul>
                    <p>Lower ‚Ñè_eff to mimic the classical limit where only the stationary path survives.</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="quantum">
            <div class="simulation-wrapper">
                <div class="info-panel">
                    <h2>Quantum Double-Slit</h2>
                    <p>Move the detector and adjust the setup to watch interference emerge from adding up every path.</p>
                    <div class="controls">
                        <label>
                            Slit Separation (mm):
                            <input type="range" id="slitSeparation" min="0.1" max="1.0" step="0.1" value="0.5">
                            <span id="slitSeparationValue">0.5</span>
                        </label>
                        <label>
                            Wavelength (nm):
                            <input type="range" id="wavelength" min="400" max="700" step="10" value="550">
                            <span id="wavelengthValue">550</span>
                        </label>
                        <label>
                            <input type="checkbox" id="showPaths" checked> Show Sample Paths
                        </label>
                        <label>
                            <input type="checkbox" id="showArrows" checked> Show Phase Arrows
                        </label>
                    </div>
                    <div class="stats">
                        <p>Detector Position: <span id="detectorPos">0.00</span> mm</p>
                        <p>Path Difference: <span id="pathDiff">0.0</span> nm</p>
                        <p>Intensity: <span id="intensity">0.00</span></p>
                    </div>
                    <div class="guided-practice">
                        <h3>üéØ Guided Practice</h3>
                        <ol>
                            <li>Drag across the screen to sample different detector spots.</li>
                            <li>Change slit spacing to compress or widen the fringe spacing.</li>
                            <li>Toggle arrows to see how phasors add to form bright and dark bands.</li>
                        </ol>
                    </div>
                </div>
                <canvas id="quantumCanvas" width="800" height="600"></canvas>
            </div>
            <div class="physics-explanation">
                <h3>üìö Interference from All Paths</h3>
                <div class="explanation-section">
                    <h4>Superposition Rule</h4>
                    <p>Each slit contributes a complex amplitude. The screen brightness tracks |œà|¬≤ after summing the phasors from slit A and slit B.</p>
                    <div class="formula">œà = œà_A + œà_B,‚ÄÉI = |œà|¬≤</div>
                </div>
                <div class="explanation-section">
                    <h4>Geometry Controls the Phase</h4>
                    <p>The relative phase ŒîœÜ is set by the extra distance one path travels. When ŒîœÜ = 2œÄm we get bright fringes; when ŒîœÜ = (2m+1)œÄ they cancel.</p>
                </div>
                <div class="explanation-section">
                    <h4>Connect Back to Action</h4>
                    <p>The arrows you see are e<sup>iS/‚Ñè</sup>. Near constructive interference the action difference is tiny‚Äîexactly the stationary-action idea reused in the other tabs.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="fermat.js"></script>
    <script src="mechanics.js"></script>
    <script src="quantum.js"></script>
    <script src="main.js"></script>
</body>
</html>
